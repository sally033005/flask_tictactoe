{% extends "base.html" %}
{% block content %}
<div class="container">
    {% if mode == '1' %}
    <h2>Single Player Setup</h2>
    <form action="/start" method="post">
        <label>Your Name:</label>
        <input type="text" name="player_name" required>

        <label>Difficulty:</label>
        <div class="custom-select-wrapper">
            <div class="select-box">
                <span class="selected-text">Easy</span>
                <div class="select-arrow"></div>
            </div>
            <div class="select-options">
                <div class="option" data-value="easy">Easy</div>
                <div class="option" data-value="medium">Medium</div>
                <div class="option" data-value="hard">Hard</div>
            </div>
            <input type="hidden" name="difficulty" id="difficulty-input" value="easy" required>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const wrapper = document.querySelector('.custom-select-wrapper');
                const selectBox = wrapper.querySelector('.select-box');
                const optionsContainer = wrapper.querySelector('.select-options');
                const options = optionsContainer.querySelectorAll('.option');
                const selectedText = wrapper.querySelector('.selected-text');
                const hiddenInput = document.getElementById('difficulty-input');

                selectBox.addEventListener('click', () => {
                    wrapper.classList.toggle('active');
                });

                options.forEach(option => {
                    option.addEventListener('click', () => {
                        const value = option.getAttribute('data-value');
                        const text = option.textContent;

                        selectedText.textContent = text;
                        hiddenInput.value = value;
                        wrapper.classList.remove('active');

                        // Update active state in UI
                        options.forEach(opt => opt.classList.remove('active'));
                        option.classList.add('active');
                    });
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', (e) => {
                    if (!wrapper.contains(e.target)) {
                        wrapper.classList.remove('active');
                    }
                });
            });
        </script>

        <button type="submit">Start Game</button>
    </form>
    {% else %}
    <h2>Create Online Room</h2>
    <form action="/start" method="post">
        <label>Your Name:</label>
        <input type="text" name="player_name" required>
        <button type="submit">Create Room</button>
    </form>
    {% endif %}
</div>
{% endblock %}